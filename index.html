<!DOCTYPE HTML>
<!--
	Dimension by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
--> <html>

  	<head>
		<title>onmik</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<link rel="stylesheet"
		      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/styles/default.min.css">
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<div class="logo">
							<img src="images/negativ.png" alt=""/>
						</div>
						<div class="content">
							<div class="inner">
								<h1>Onmik</h1>
								<p>fotoexperimenty a úvahy amatérskeho astrofotografa,</br>
									fanušíka linuxu a knižnice numpy</p>
							</div>
						</div>
						<nav>
							<ul>
							  <li><a href="#technika">Technika</a></li>
							  <li><a href="#astrophoto">Astrofoto</a></li>
							  <li><a href="#foto">fotoexperimenty</a></li>
							  <li><a href="#blog">Blog</a></li> 
							  <li><a href="#contact">Kontakt</a></li>
							</ul>
						</nav>
					</header>

				<!-- Main -->
					<div id="main">

		<!-- Technika -->
							<article id="technika">
								<h2 class="major">Technika</h2>
								<span class="image main"><img src="images/zostava_2.jpg" alt="" /></span>

								<aside>
								<h3> ďalekohlad - kvadruplet Teleskop Service </h3>
								<p>  Tento apochromatický refraktor má štvorčlennú konštrukciu so zabudovaným rovnačom pola. Ďalekohlad trpí zbytkovou farebnou vadou (zrejme by pomohlo namiesto použitého skla FPL51 použíť napríklad FPL53), ničmenej pri fotení na úzkopásmo je táto vada výrazne potlačená úzkou priepustnosťou filtrov.</p>
								<table>
								  <tr>
								    <td>Priemer objektivu</td>
								    <td>70 mm</td>
								  </tr>
								  <tr>
								    <td>Ohnisko</td>
								    <td>474 mm</td>
								  </tr>
								   <tr>
								    <td>Konštrukcia</td>
								    <td>4 optické členy s rovnačom pola</td>
								  </tr>
								</table>
								</aside>

								<aside>
								<h3>Montáž - NEQ6</h3>
								
								<p><span class="image left"><img src="images/neq6.png" alt="NEQ6"/></span> NEQ6 patrí medzi ťažšie paralaktické montáže (cca 30 kg so stativom) s relativne vysokou nosnosťou. Chod montáže síce nie je úplne presný, nepresnosti sú ale ľahko kompenzovatelné pomocou pointácie. Montáž je so systémom Ekos/INDI cez ručku v PC Direct Mode a ovládané cez driver EQMod, ktorý je súčasťou projektu INDI.</p>
								</aside>

								<section>
								<h3>CCD kamera - Atik 460exm</h3>
								<p><span class="image right"><img src="images/460.png" alt="Atik kamera"/></span>Citlivá CCD kamera s minimálnym temným prúdom takmer nevyžaduje kalibračné temné snímky. Vzhladom k obmedzeniam starších  CCD snímačov (v porovnaní s dnešnými CMOS vyšší vyčítací šum, a podstatne dlhší vyčítací čas) je vhodná na dlhé expozície a presnou, alebo pointovanou montážou. Obvykle s touto kamerou fotím 10 minutové subexpozície, vďaka ktorým sa uvedené obmedzenia stávajú zanedbatelným.</p>
								<table>
								  <tr>
								    <td>Rozlíšenie</td>
								    <td>2749 x 2199 px</td>
								   
								  </tr>
								  <tr>
								    <td>Veľkosť pixelu</td>
								    <td>4.54 µm x 4.54 µm</td>
								  </tr>
								  <tr>
								    <td>ADC</td>
								    <td>16 bit</td>
								  </tr>
								  
								  <tr>
								    <td>Vyčítací šum</td>
								    <td>5e-</td>

								  </tr>
								  <tr>
								    <td>Gain Factor</td>
								    <td>0.27e-/ADU</td>
								  </tr>
								  <tr>
								    <td>Full well</td>
								    <td>18 000 e-</td>
								  </tr>
								   <tr>
								    <td>Temný prúd</td>
								    <td>0.0004 e-/s pri -1O °C</td>
								  </tr>
								</table>
								</section>
								<section>
								<h3>Filtre</h3>
								<p>Primárne sa zameriavam na úzkopásmové fotenie technikou bicolor, pre ktoré používam H-alfa 3 nm a O-III 4 nm filtre of firmy Baader. Pre širokopásmový fotografiu používam proti reflexom a na čiastočnu elimináciu zbytkovej farebnej vady objektívu, UV/IR cut filter, taktiež od Baadera. Časom plánujem dokúpiť RGB a S-II.</p>
								</section>
							</article>

				<!-- Astrofoto -->
							
							<article id="astrophoto">

							  <h2 class="major">Galéria</h2>
							  
							  <span class="image gal"> <a href="#elephant"><img alt="elephant" src="images/elephant.jpg"></a></span>
							  <span class="image gal"> <a href="#superspln"><img alt="superspln" src="images/superspln.jpg"></a></span>
							  <span class="image gal"> <a href="#mesiac"><img alt="mesiac" src="images/mesiac.jpg"></a></span>
							<span class="image gal"> <a href="#comet_galaxy"><img alt="comet_galaxy" src="images/comet_galaxy.jpg"></a></span>
								<span class="image gal"> <a href="#milky"><img alt="milkyway" src="images/bg.jpg"></a></span>
							  <span class="image gal"> <a href="#veil"><img alt="veil" src="images/veil.jpg"></a></span>
							  
							  
							  <span class="image gal"> <a href="#musky"><img alt="musky" src="images/musky.jpg"></a></span>
							  <span class="image gal"> <a href="#perseidy"><img alt="perseidy" src="images/perseidy.jpg"></a></span>
							  <span class="image gal"> <a href="#cesta_do_neba"><img alt="cesta_do_neba" src="images/cesta_do_neba.jpg"></a></span>
							  <span class="image gal"> <a href="#kometa_praha"><img alt="kometa_praha" src="images/kometa_praha.jpg"></a></span>
							  <span class="image gal"> <a href="#nlc"><img alt="nlc" src="images/nlc.jpg"></a></span>							  
							  <span class="image gal"> <a href="#plejady"><img alt="plejady" src="images/plejady.jpg"></a></span>							  
							
							</article>

							
		<!-- Rozne foto -->
							<article id="foto">
							  <h4 class="major">Camera obscura</h4>
							   <span class="image main"> <a href="https://www.rajce.idnes.cz/ondrondro/album/camera-obscura-pinhole" target="_blank"><img alt="pinhole" src="images/kolajnice.jpg"></a></span>
							   <h4 class="major">Svätojánske mušky</h4>
							   <span class="image main"> <a href="https://www.rajce.idnes.cz/ondrondro/album/svatojanske-musky" target="_blank"><img alt="svetlusky" src="images/2.jpg"></a></span>
							  <h4 class="major">IR/Full spectrum</h4>
							  <span class="image main"> <a href="https://www.rajce.idnes.cz/ondrondro/album/z-krchova-do-zoo-technika-ir-full-spectrum" target="_blank"><img alt="IR" src="images/IR.jpg"></a></span>
							</article>
					
		<!-- Contact -->
							<article id="contact">
							  <h2 class="major">Kontakt</h2>
							  <p>miklas.ondrej@protonmail.com</p>
								<ul class="icons">
								
									<li><a href="https://www.facebook.com/ondrej.miklas.1" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
								
									<li><a href="https://github.com/onmik" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
								</ul>
							</article>

				<!-- Elephant -->
							<article id="elephant">
							  <div class="dalsia"><a href="#superspln">Ďalšia >></a></div>
							  <div class="center"><a href="#astrophoto">Späť do galérie</a></div>
							  
							  <h4 class="major">Elephant Trunk Nebula</h4>
							  <span class="image main"> <a href="images/elephant.jpg" target="_blank"><img alt="elephant" src="images/elephant.jpg"></a></span>
							  <p>Ďalekohlad: TSEQ70 </br>
							    Montáž: NEQ6 </br>
							    Kamera: CCD Atik 460Exm </br>
							    Subexpozície: H-alfa 25 x 10 min, O-III 25 x 10 min  </br>
							    Pointačná kamera: ZWO ASI120MC </br
							     Software: Ekos/INDI/Siril </p> 
								
							</article>


							
			<!-- Superspln -->		
							<article id="superspln">
							  
							  <div class="pred"><a href="#elephant"><< Predchodzia</a></div>
												   <div class="center"><a href="#astrophoto">Späť do galérie</a></div> 
												   <div class="dalsia"><a href="#mesiac"> Dalšia >></a></div>
							  
							  <h4>Superspln</h4>
							  <span class="image main"> <a href="images/superspln.jpg" target="_blank"><img alt="superspln" src="images/superspln.jpg"></a></span>
							  <p>
							    Kamera: Canon EOS 77D</br>
							    Objektív: Sigma mirror 600mm/f8 
							    
							  </p>
							</article>




				<!-- Mesiac -->		
							<article id="mesiac">
							  <div class="pred"><a href="#superspln"><< Predchodzia</a></div>
												   <div class="center"><a href="#astrophoto">Späť do galérie</a></div> 
												   <div class="dalsia"><a href="#comet_galaxy"> Dalšia >></a></div>
							 
							  <h4>Krátery</h4>
							  <span class="image main"> <a href="images/mesiac.jpg" target="_blank"><img alt="kratery" src="images/mesiac.jpg"></a></span>
							  <p>
							    Kamera: Canon EOS 6D</br>
							    Objektív: Dobson 1200/f200 + barlow 2x 
							    
							  </p>
							</article>

				<!-- Kometa a galaxia -->	
							<article id="comet_galaxy">
							  
							   <div class="pred"><a href="#mesiac"><< Predchodzia</a></div>
							   <div class="center"><a href="#astrophoto">Späť do galérie</a></div> 
							   <div class="dalsia"><a href="#milky"> Dalšia >></a></div>
							 
							  <h4>Kométa Pons-Brooks a galaxia M 31 </h4>
							  <span class="image main"> <a href="images/comet_galaxy.jpg" target="_blank"><img alt="comet_galaxy" src="images/comet_galaxy.jpg"></a></span>
							  <p>
							    Kamera: Canon EOS 6D</br>
							    Objektív: Zeiss Jena 135/f3.5 </br>
							    Montáž: Omegon minitrack LX 4 
							    
							  </p>

							</article>
				<!-- Milky -->
							<article id="milky">


							   <div class="pred"><a href="#comet_galaxy"><< Predchodzia</a></div>
							   <div class="center"><a href="#astrophoto">Späť do galérie</a></div> 
							   <div class="dalsia"><a href="#veil"> Dalšia >></a></div>
							 
							  
							  <h4>Mlična cesta na ionosférickým observatóriom<h4>
							      <span class="image main"> <a href="images/bg.jpg" target="_blank"><img alt="superspln" src="images/bg.jpg"></a></span>
							      <p>
								Kamera: Canon EOS 6D </br>
								Objektív: Samyang 35/1.4
							      </p>
							      
							</article>


							
				<!-- Veil -->
							<article id="veil">


							   <div class="pred"><a href="#milky"><< Predchodzia</a></div>
							   <div class="center"><a href="#astrophoto">Späť do galérie</a></div> 
							   <div class="dalsia"><a href="#musky"> Dalšia >></a></div>
							 
							  
							  <h4>Riasová hmlovina</h4>
							  <span class="image main"> <a href="images/veil.jpg" target="_blank"><img alt="veil nebula" src="images/veil.jpg"></a></span>
							  <p>
							    Kamera: Canon EOS 40D astro-modifikovaný </br>
							    Objektív: Takumar 200/f4 </br>
							    Montáž: Sky-watcher AZ-Gti
							    
							  </p>
							</article>

							
		<!-- Musky -->
							<article id="musky">


							   <div class="pred"><a href="#veil"><< Predchodzia</a></div>
							   <div class="center"><a href="#astrophoto">Späť do galérie</a></div> 
							   <div class="dalsia"><a href="#perseidy"> Dalšia >></a></div>    
							 
							  
							  <h4>Svätojánske mušky</h4>
							  <span class="image main"> <a href="images/musky.jpg" target="_blank"><img alt="fireflyes" src="images/musky.jpg"></a></span>
							  <p>
						Kamera: Canon EOS 6D </br>
						Objektív: Samyang 35/1.4
					      </p>
							</article>


		<!-- Perseidy -->
							<article id="perseidy">

							   <div class="pred"><a href="#musky"><< Predchodzia</a></div>
							   <div class="center"><a href="#astrophoto">Späť do galérie</a></div> 
							   <div class="dalsia"><a href="#cesta_do_neba"> Dalšia >></a></div>    
							 
							  <h4>Perseidy</h4>
							  <span class="image main"> <a href="images/perseidy.jpg" target="_blank"><img alt="perseidy" src="images/perseidy.jpg"></a></span>
							  <p>
						Kamera: Canon EOS 77D </br>
						Objektív: Sigma fsheye
					      </p>
							</article>

		<!-- Cesta do neba -->
							<article id="cesta_do_neba">

							  <div class="pred"><a href="#perseidy"><< Predchodzia</a></div>
							  <div class="center"><a href="#astrophoto">Späť do galérie</a></div> 
							  <div class="dalsia"><a href="#kometa_praha"> Dalšia >></a></div>    
							  
							  <h4>Prameny - Tři křížky</h4>
							  <span class="image main"> <a href="images/cesta_do_neba.jpg" target="_blank"><img alt="cesta_do_neba" src="images/cesta_do_neba.jpg"></a></span>
							  <p>
							    Kamera: Canon EOS 40D </br>
							    Objektív: Sigma 10-20/f4
							  </p>
							</article>

		<!-- kometa_praha -->
							<article id="kometa_praha">

							  <div class="pred"><a href="#cesta_do_neba"><< Predchodzia</a></div>
							  <div class="center"><a href="#astrophoto">Späť do galérie</a></div> 
							  <div class="dalsia"><a href="#nlc"> Dalšia >></a></div>    
							  
							  <h4>Kometa nad Prahou</h4>
							  <span class="image main"> <a href="images/kometa_praha.jpg" target="_blank"><img alt="kometa_praha" src="images/kometa_praha.jpg"></a></span>
							  <p>
							    Kamera: Canon EOS 77D </br>
							    Objektív: 18-50
							  </p>
							</article>

		<!-- nlc -->
							<article id="nlc">

							  <div class="pred"><a href="#kometa_praha"><< Predchodzia</a></div>
							  <div class="center"><a href="#astrophoto">Späť do galérie</a></div> 
							  <div class="dalsia"><a href="#plejady"> Dalšia >></a></div>
							  
							  <h4>NLC</h4>
							  <span class="image main"> <a href="images/nlc.jpg" target="_blank"><img alt="nlc" src="images/nlc.jpg"></a></span>
							  <p>
							    Kamera: Canon EOS 77D </br>
							    Objektív: Sigma 10-20/f4
							  </p>
							</article>
		<!-- plejady -->
							<article id="plejady">

							  <div class="pred"><a href="#nlc"><< Predchodzia</a></div>
							  <div class="center"><a href="#astrophoto">Späť do galérie</a></div> 
							<!--  <div class="dalsia"><a href="#nlc"> Dalšia >></a></div> -->    
							  
							  <h4>Plejády a Mars</h4>
							  <span class="image main"> <a href="images/plejady.jpg" target="_blank"><img alt="pleady" src="images/plejady.jpg"></a></span>
							  <p>
							    Kamera: Canon EOS 6D </br>
							    Objektív: Zeiss 135/f3.5
							    Montáž: Omegon Minitrack LX2
							  </p>
							</article>


		<!-- Blog -->
							<article id="blog">
							<h2 class="major">Blog</h2> 
							<h3>Na velikosti pixelu stále záleží</h3>
							  <p>Trend zvyšovania rozlíšenia a zmenšovania pixelov si všímam, odkedy nejakým spôsobom vnímam digitálnu fotografiu. Osobne si myslím, že tento trend prináša viac škody než úžitku, avšak nie všetci fotografi by so mnou súhlasili. Toť nedávno som natrafil na článok, vyvracajúci mýtus (i keď podla mojej domnieky, ktorú sa v tomto blogu pokúsom obhájiť, sa nejedná o mýtus), že so zvyšovaním rozlíšenia senzoru a teda smenšovaním pixelov, na jednotlivé pixely dopadá menej svetla a tým sa znižuje kvalita obrazu. Argumenty v článku pre to, že sa jedná len o mýtus, sú založené na tom, že pri zmenšovaní velkosti pixelu síce dopadá menej fotónov na jednotlivý pixel, ale celkový počet fotónov dopadajúcich na snímač sa nemení a tudíž kvalita obrazu sa nielen že nemení, ale dokoca vďaka väčšiemu rozlíšeniu, zlepšuje.<blockquote> " The argument is usually based around the idea that ‘larger pixels can gather more light’. This is true, if you consider a pixel in isolation. However, a sensor is an array of pixels, and a larger pixel occupies a larger proportion of that sensor. Apart from one factor, which will be discussed later, the size of the pixels does not affect how much light a sensor can collect. If you look at weather forecasts, the amount of rain is measured in millimetres. This is the depth of rainfall collected in the bottom of a straight-sided vessel left in the rain. The area of the vessel does not matter, since the depth will always be the same."</br></br> Celý článok je na linku: <a href="https://amateurphotographer.com/latest/opinion/are-smaller-pixels-worse-sensor-technology-myths-explained/">Are smaller pixels worse? Sensor technology myths explained</a> </blockquote> Aj keď uvedené vety sú pravdivé, toto stanovisko ignoruje ďalší jav, prejavujúci sa hlavne za horších svetelných podmienok a tým je <b>fotónový šum</b>.</p>
							  <p>
							    Fotónový šum vychádza so stochastickej povahy svetelného signálu a je to odchylka signálu, spôsobená fluktuáciou v počte dopadaných fotónov okolo očakávaného signálu (očakávaný signál je priemerná hodnota poissonového rozdelenia). To znamená že napríklad pri signále 100 fotónov nám za jednotkový expozičný čas dopadne na snímač raz 100 fotónov, potom 94, potom 102, atď. - rozdielne hodnoty sú dané poissonovým pravdepodobnostným rozdelením. Smerodatná odchylka signálu je v prípade poissonového rozdelenia odmocninou signálu. A vzhladom k tomu, že sa jedná o šum, vychádzajúci z prirodzenej povahy svetelného signálu, žiaden technologický pokrok pri výrobe čipu nám nepomôže a jediný spôsob, ako si sním zmysluplne poradiť, je nazbierať väčšie množstvo fotónov a tým si zlepšiť pomer signálu k jeho odchýlke (šumu). V prípade, identickej optickej sústavy, expozičného času a citlivosti snímača, jedinou premennou ktorá môže zvýšiť počet dopadajúcich fotónov, je práve velkosť pixelu.
							  </p>
							  <p>
							    Uvažujme 3 dokonalé snímače so 100 % kvantovou účinnosťou, produkúce nulový šum, hotpixelym či iné artefakty. Snímače majú rovnakú plochu, na ktorú dopadá svetlo s kontantným rozložením intenzity, ale snímače majú rozdielne rozlíšenie (velkosť pixelov): prvý má pixely velikosti 1 x 1 nm, druhý 2 x 2 nm a tretí 5 x 5 nm. V prípade fotónového toku 100 fotónov na 1 nm, bude charakteristika signálu a šumu pre tieto pixely tak ako je to na uvedených grafoch. Z grafov je zrejmé zlepšovanie pomeru signál/šum (tento pomer odpovedá smerodatnej odchýlke) so zväčšovaním pixelu. Kvalita fotografického výstupu nie je daná samotným osvetlením pixelu, ale práve pomerom signál/šum. Nie je to ale obecne platné pravidlo, pretože od určiteho pomeru je zlepšovanie výstupu zanedbatelné - nastavenie prahu pre zlepšovanie je už subjektívna záležitosť každého fotografa.
							  </p>
							  <span class="image gal"> <img alt="100" src="images/poisson/100.jpg"></span>
							  <span class="image gal"> <img alt="400" src="images/poisson/400.jpg"></span>
							  <span class="image gal"> <img alt="2500" src="images/poisson/2500.jpg"></span>

							  <p>
							    Poďme si ďalej skúsiť vygenerovať príklad (na konci blogu prikladám skript), ktorý bude počítať rovnakými pixelmi ako je to v prípade ukážky poissonového rozdelenia (štvorcové pixely so stranou 1 nm, 2 nm a 5 nm). Rozlíšenie pre snímače pri zachovaní celkovej plochy snímača je teda: 9 Mpx, 2.25 Mpx a 0.36 Mpx. S použitím skvelej knižnice numpy je možné preložiť pole v tvare rozlíšenia snímača (3000 x 3000 px) hocjakou matematickou funkciou (pre účely príkladu ide iba o to, aby sme dosiahli rozdiely v jase na snímači) a tým si vygenerovať obrázok, ktorý bude použitý pre porovnanie. V prípade, žeby svetlo bolo determistického charakteru a teda by nevznikal fotónový šum, by obrázok pre všetky tri snímače vyzeral takto:
							  </p>
							  
							  <span class="image gal"> <img alt="100" src="images/poisson/noiseless.jpg"></span>
							  <span class="image gal"> <img alt="400" src="images/poisson/noiseless_resampled_2.jpg"></span>
							  <span class="image gal"> <img alt="2500" src="images/poisson/noiseless_resampled_5.jpg"></span>

							  <p>
Nevidíte medzi obrázkami rozdiely? Výborne! Celkový počet fotónov je nemenný a po vyrovnaní jasov (viz color bar vpravo) je naozaj jediný rozdiel v kvalite, ktorý na takto malom obrázku nie je vidieť, v rozlíšení a teda snímač s menšími pixelim by znamenal vyššiu obrazovú kvalitu, tak ako je to uvedené v pôvodnom článku. Realita je ale trošku iná:
							  </p>
							  <span class="image gal"> <img alt="100" src="images/poisson/full_resolution.jpg"></span>
							  <span class="image gal"> <img alt="400" src="images/poisson/resampled_2.jpg"></span>
							  <span class="image gal"> <img alt="2500" src="images/poisson/resampled_5.jpg"></span>

							  <p>
Vzhladom k tomu, že svetelný signál (počet fotónov dopadajúcich na plochu) nikdy nie je konštantný, ale riadi sa poissonovým rozdelením, pri málo svetelných podmienkach je výsledný výstup silno ovplyvnený i počtom fotónov dopadajúcich na jeden pixel, nie len celkovým počtom fotónov dopadajúcich na plochu snímača. A teda väčšie pixely, pri nemenných ostatných parametroch systému, v prípade slabej expozície, vždycky budú produkovať z hladiska osvetlenia a šumu lepší výstup. </p></p> Rozdielna situácia bude v prípade silného svetelného signálu, kedy bude i pre malý pixel dosiahnutý dostatočný pomer signál/šum a zväčšovanie pixelu už neprinenie žiadnu výhodu, akurát sa vplyvom horšieho rozlíšenia zhorší celková kvalita výstupu. V tomto prípade by teda platily závery pôvodného článku. Napríklad pri 1000 násobne silnejšom signále by porovnanie bolo takéto:   
							  </p>

<span class="image gal"> <img alt="100" src="images/poisson/alt/full_resolution.jpg"></span>
<span class="image gal"> <img alt="400" src="images/poisson/alt/resampled_2.jpg"></span>
<span class="image gal"> <img alt="2500" src="images/poisson/alt/resampled_5.jpg"></span>

							  <p>
							    Záverom, pri hodnotení vplyvu velkosti pixelu a rozlíšenia snímačov na kvalitu výstupu, nestačí brať v úvahu technologický pokrok, kedy sa kvantová účinnosť moderných snímačov blíži dokonalosti, ale stále musíme uvažovať konkrétne podmienky. A v horších svetelných podmienkach majú kamery s relatívne malým rozlíšením stále svoj význam. </p><p> Nutno uviesť, že i tento blog je pomerne zjednodušujúci a zanedbáva ďalšie efekty, ktoré je ďalej nutné hodnotit pri posudzovaní vplyvu rozlíšenia na kvalitu obrazu. A to je napríklad ďalšie zložky šumu (temný prúd, ktorý sa zväčšuje pri dĺžke expozície takže eliminácia fotónoveho šumu predlžovaním expozičného času môže byť problematická), vykreslenie optickej sústavy, ohnisko, iné než svetelné podmienky (napríklad nestabilita atmosféty - seeing),... Možno sa im povenujem v niektorom z ďalších blogov. </p>
	<p>						    Dole je skript, použitý pre generovanie obrázkov a testovanie úvah. Jadrom skriptu je rutina <a href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.poisson.html">numpy.random.poisson</a>. </p> 
							  </P>

							  <pre> <code class="python">
import matplotlib.pyplot as plt
import numpy as np


#------------------- poisson example-----------------
pixel_small = 10000             # mean photon count (expected signal)

def poisson_1d(pixel):
    sample = np.random.poisson(pixel, 10000)
    dev = np.std(sample)
    print("st. odchylka of ", pixel/pixel_small, "nm pixel and ", pixel_small, "photons/1 nm flux: ",  str(dev))
    
    bin = np.arange(np.min(sample), np.max(sample), 1)    
    plt.hist(sample, bins=bin) 
    plt.xlabel("photon count")
    plt.ylabel("probability") 
    plt.title("očakávaný signál: " + str(np.mean(sample)) + "\nst. odchylka: " + str(dev))
    plt.show()
    plt.savefig(str(pixel) + ".jpg")
    plt.close()

poisson_1d(pixel_small)
poisson_1d(pixel_small * 4)
poisson_1d(pixel_small * 25)    

#-----------------photon noise--------------------------
def generate_img(resolution):
    x, y = np.meshgrid(np.linspace(0, 1, resolution), np.linspace(0, 1, resolution))
    return ((0.5 + x + x**10 + y/4 + y**8) * np.exp(-x**1.8 - y**1.5) * 200).astype(int)
    
def resample(img, binning):
    big = img.reshape(img.shape[0]//binning, binning, img.shape[1]//binning, binning)
    return big.sum(axis=(1, 3))

def poisson(img):
    return np.random.poisson(img, (img.shape[0], img.shape[1]))

def figure(fig, name):
    plt.imshow(fig, cmap='gray')
    plt.colorbar()
    plt.title(name)
    plt.savefig(name + ".jpg" , dpi=600)
    plt.close()
    
# ------------------ Noiseless----------------   
noiseless = generate_img(3000)
figure(noiseless, "noiseless")
print("\nFull resolution illumination: ", noiseless.sum())

noiseless_resampled_2 = resample(noiseless, 2)
figure(noiseless_resampled_2, "noiseless_resampled_2")
print("Resampled 2 illumination: ", noiseless_resampled_2.sum())

noiseless_resampled_5 = resample(noiseless, 5)
figure(noiseless_resampled_5, "noiseless_resampled_5")
print("Resampled 5 illumination: ", noiseless_resampled_5.sum())    

#------------------ with noise---------------------------------
noise = poisson(noiseless)
figure(noise, "full_resolution")

noise_resampled_2 = poisson(noiseless_resampled_2)
figure(noise_resampled_2, "resampled_2")

noise_resampled_5 = poisson(noiseless_resampled_5)
figure(noise_resampled_5, "resampled_5")							    </code></pre>

							</article>

							
					</div>
				<!-- Footer -->
					<footer id="footer">
					  <p class="copyright"> miklas.ondrej@protonmail.com</p></br>
					  <p class="copyright">Design: <a href="https://html5up.net">HTML5 UP</a>.</p>

					</footer>

			</div>

		<!-- BG -->
			<div id="bg"></div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
			<script src="assets/js/gallery.js"></script>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/highlight.min.js"></script>
			


	</body>
</html>
